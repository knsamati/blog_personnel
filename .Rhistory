df.loc[df['PREFECTURE'] == 'ARRONDISSEMENTIII', df['PREFECTURE']]= 'LOME_COMMUNE'
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt
#import chardet
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
dt['Tx_redoublement']
dt
carte
prefecture = dt.merge(carte, on = "PREFECTURE", how='left')
prefecture = gpd.GeoDataFrame(prefecture)
prefecture.columns
prefecture.plot()
plt.show()
prefecture.shape()
prefecture.shape
prefecture.plot(column='Tx_redoublement',linewidth=0.03, cmap="Reds", scheme="quantiles", k=9, alpha=0.9)
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement',linewidth=0.03, cmap="Reds", scheme="quantiles", k=9, alpha=0.9)
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement',linewidth=0.03, cmap="Reds", scheme="quantiles", k=9, alpha=0.9)
plt.tight_layout()
plt.show()
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt
import mapclassify
#import chardet
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
# 100*(sum(red_G_AN2+red_F_AN2)/sum(Effectif_F_AN1+)))
prefecture = dt.merge(carte, on = "PREFECTURE", how='left')
prefecture = gpd.GeoDataFrame(prefecture)
prefecture.columns
prefecture.plot(column='Tx_redoublement',linewidth=0.03, cmap="Reds", scheme="quantiles", k=9, alpha=0.9)
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement',linewidth=0.03, cmap="Reds", k=9, alpha=0.5)
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement',linewidth=0.03, cmap="Reds")
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds")
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth=0.8, ax=ax, edgecolor=’0.8')
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth=0.8, ax=ax, edgecolor=’0.8')
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8, edgecolor = ’0.8')
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8, edgecolor = 0.8)
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8)
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
ax.axis(‘off’)
ax.set_title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
ax.axis('off')
ax.set_title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8',ax = ax)
ax.axis('off')
ax.set_title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8',ax = ax)
axis('off')
ax.set_title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
axis('off')
ax.set_title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
plt.axis('off')
ax.set_title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
plt.axis('off')
plt.set_title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
plt.axis('off')
plt.title('Taux de redoublement par prefecture', fontdict={'fontsize': '25', 'fontweight' : '3'})
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
plt.axis('off')
plt.title('Taux de redoublement par prefecture')
plt.tight_layout()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
plt.axis('off')
plt.title('Taux de redoublement par prefecture')
plt.legend()
plt.show()
prefecture.plot(column='Tx_redoublement', cmap="Reds",linewidth = 0.8,edgecolor='0.8')
plt.axis('off')
plt.title('Taux de redoublement par prefecture')
plt.show()
import altair as alt
import gpdvega
alt.Chart(prefecture).mark_geoshape(
).encode(
color='Tx_redoublement',
tooltip=['prefecture','Tx_redoublement']
).properties(
width=500,
height=300
)
import altair as alt
from vega_datasets import data
counties = alt.topo_feature(data.us_10m.url, 'counties')
source = data.unemployment.url
alt.Chart(counties).mark_geoshape().encode(
color='rate:Q'
).transform_lookup(
lookup='id',
from_=alt.LookupData(source, 'id', ['rate'])
).project(
type='albersUsa'
).properties(
width=500,
height=300
)
from vega_datasets import data
counties = alt.topo_feature(data.us_10m.url, 'counties')
source = data.unemployment.url
alt.Chart(counties).mark_geoshape().encode(
color='rate:Q'
).transform_lookup(
lookup='id',
from_=alt.LookupData(source, 'id', ['rate'])
).project(
type='albersUsa'
).properties(
width=500,
height=300)
exit
install.packages('vegawidget')
blogdown::serve_site()
servr::daemon_stop(1)
blogdown::serve_site()
servr::daemon_stop(1)
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt
import mapclassify
#import chardet
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ax = carte.plot(figsize=(8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ecole.to_crs(epsg=32630).plot(markersize=1, ax=ax)
reticulate::repl_python()
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt
import mapclassify
#import chardet
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ax = carte.plot(figsize=(8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ecole.to_crs(epsg=32630).plot(markersize=1, ax=ax)
df.dtypes
df['lat']=df.lat.astype(float)
df['long']=df.long.astype(float)
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ax = carte.plot(figsize=(8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ecole.to_crs(epsg=32630).plot(markersize=1, ax=ax)
df['lat']=pd.to_numeric(df.lat,errors='coerce')
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
df['lat'] = pd.to_numeric(df.lat,errors='coerce')
df['long'] = pd.to_numeric(df.long,errors='coerce')
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ax = carte.plot(figsize=(8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ecole.to_crs(epsg=32630).plot(markersize=1, ax=ax)
#import chardet
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
df['lat'] = pd.to_numeric(df.lat,errors='coerce')
df['long'] = pd.to_numeric(df.long,errors='coerce')
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ecole.plot()
plt.show()
ecole.columns
ecole['geometry'].head()
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
#df['lat'] = pd.to_numeric(df.lat,errors='coerce')
#df['long'] = pd.to_numeric(df.long,errors='coerce')
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ecole['geometry'].head()
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ecole.plot()
plt.show()
install.packages(c("AsioHeaders", "attachment", "backports", "bayestestR", "blogdown", "bookdown", "broom", "Cairo", "callr", "classInt", "cli", "covr", "crosstalk", "devtools", "dplyr", "DT", "effectsize", "emmeans", "expss", "flextable", "forcats", "foreach", "fs", "fst", "gdtools", "geojsonio", "GGally", "ggeffects", "ggimage", "ggplotify", "ggrepel", "glmmTMB", "glue", "golem", "gridGraphics", "gridtext", "gstat", "gt", "hexbin", "hrbrthemes", "httpcode", "igraph", "insight", "intervals", "isoband", "ISOcodes", "knitr", "leafem", "learnr", "lifecycle", "link2GI", "lme4", "lubridate", "lwgeom", "mapproj", "mapview", "matrixStats", "mlr", "mnormt", "modelr", "mongolite", "mvtnorm", "nloptr", "officer", "osmdata", "pagedown", "parallelMap", "parameters", "ParamHelpers", "performance", "plotly", "plyr", "pROC", "processx", "proj4", "protolite", "ps", "quanteda", "quantmod", "quantreg", "R.methodsS3", "ranger", "Rcpp", "RcppArmadillo", "RcppParallel", "reactR", "rematch2", "repr", "reshape2", "RgoogleMaps", "rJava", "RJSONIO", "rlang", "rmapshaper", "rmarkdown", "roxygen2", "Rttf2pt1", "rvcheck", "sass", "servr", "sf", "shiny", "shinycssloaders", "shinyWidgets", "showtext", "sjlabelled", "sjmisc", "sjPlot", "sjstats", "skimr", "SnowballC", "sp", "spacetime", "spacyr", "spatstat", "spatstat.utils", "spData", "srvyr", "stars", "stopwords", "stplanr", "survey", "svglite", "testthat", "tibble", "tidytext", "tinytex", "tmap", "tmaptools", "TMB", "units", "usethis", "uuid", "V8", "vctrs", "xaringan", "xfun", "xlsx", "xml2", "yesno"))
install.packages(c("Cairo", "devtools", "effectsize", "httpcode", "isoband", "lwgeom", "RcppArmadillo", "reshape2", "rlang", "sf", "spatstat", "spatstat.utils", "spData", "srvyr", "stars", "stopwords", "stplanr", "survey", "svglite", "testthat", "tibble", "tidytext", "tinytex", "tmap", "tmaptools", "TMB", "units", "usethis", "uuid", "V8", "vctrs", "xaringan", "xfun", "xlsx", "xml2", "yesno"))
blogdown::serve_site()
servr::daemon_stop(1)
blogdown::serve_site()
blogdown::build_site(local=FALSE)
blogdown::serve_site()
servr::daemon_stop(2)
blogdown::serve_site()
servr::daemon_stop(1)
blogdown::build_site(local=FALSE)
blogdown::serve_site()
servr::daemon_stop(1)
blogdown::serve_site()
library(data.table)
library(dtplyr)
library(dplyr)
#library(vroom)
fichier <- "C:/Users/Samati/Desktop/r/SPSS_RGPH4/population.csv"
#df <- vroom(fichier,id='file_name')
#spec(df)
#dim(df)
dt <- fread(fichier)
dt[,sexe:= as.factor(P04)]
setattr(dt$sexe,"levels",c("Masculin","Feminin"))
dt[,by=sexe,.(.N,mean(P06AGE, na.rm = T))]
library(dtplyr)
df <- lazy_dt(setDF(dt))
df %>% groupby(as.factor(P04)) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE))
df %>% group_by(as.factor(P04)) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE))
library(RSQLite)
library(DBI)
library(dplyr)
setwd("C:/Users/Samati/Desktop/r/SPSS_RGPH4")
con <- dbConnect(RSQLite::SQLite(), dbname = "census.sqlite3")
dbListTables(con)
population <- tbl(con, "population")
population %>% group_by(as.factor(P04)) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE))
population <- tbl(con, "population")
population %>% group_by(factor(P04)) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE))
population <- tbl(con, "population")
population %>% group_by(!!factor(P04)) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE))
population <- tbl(con, "population")
population %>% group_by(P04) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE))
population <- tbl(con, "population")
population %>% group_by(P04) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE)) %>%
show_query()
reticulate::repl_python()
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt
import mapclassify
#import chardet
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
#df['lat'] = pd.to_numeric(df.lat,errors='coerce')
#df['long'] = pd.to_numeric(df.long,errors='coerce')
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ecole['Tx_redoublement'] = (ecole['red_G_AN2'].add(ecole['red_F_AN2']))/(ecole['Effectif_F_AN1'].add(ecole['Effectif_G_AN1']))
#ecole.plot()
#plt.show()
ecole['geometry'].head()
ax = carte.plot(figsize=(8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ecole.plot(size=ecole.Tx_redoublement, ax=ax)
plt.show()
ax = carte.plot(figsize=(8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ecole.plot(markersize=ecole.Tx_redoublement, ax=ax)
plt.show()
savanes_carte = carte['REGION'=='SAVANES']
savanes_ecole = carte['REGION'=='SAVANES']
savanes_carte = carte['REGION'] =='SAVANES'
savanes_ecole = ecole['REGION'] =='SAVANES'
ecole.columns
ecole.columns
savanes_carte = carte['REGION'] =='SAVANES'
savanes_ecole = ecole['DRE'] =='SAVANES'
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
savanes_ecole.plot(markersize = savanes_ecole.Tx_redoublement, ax=ax)
plt.show()
savanes_carte.plot()
savanes_carte = carte.loc[REGION=='SAVANES']
savanes_carte = carte.loc[carte.REGION=='SAVANES']
savanes_carte.plot()
plt.show()
savanes_carte = carte.loc[carte.REGION =='SAVANES']
savanes_ecole = ecole.loc[ecole.DRE =='SAVANES']
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
savanes_ecole.plot(markersize = savanes_ecole.Tx_redoublement, ax=ax)
plt.show()
savanes_ecole.plot()
plt.show()
savanes_ecole.head()
ecole.plot()
plt.show()
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt
import mapclassify
#import chardet
df = pd.read_csv(r'C:/Users/Samati/Desktop/r/geo/primaire_geo.csv',sep = ';',encoding= 'Latin-1')
carte = gpd.read_file(r'C:/Users/Samati/Desktop/r/geo/TGO_l04_2012.shp')
df['PREFECTURE'] = df['PREFECTURE'].str.replace(" ","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace("-","_")
carte['PREFECTURE'] = carte['PREFECTURE'].str.replace(r"S/p_M\x93","MO",regex=True)
carte['PREFECTURE'] = carte['PREFECTURE'].str.upper()
df['PREFECTURE'] = df['PREFECTURE'].str.upper()
df['PREFECTURE'].unique()
dt = df.groupby('PREFECTURE').sum().reset_index()
dt['Tx_redoublement'] = (dt['red_G_AN2'].add(dt['red_F_AN2']))/(dt['Effectif_F_AN1'].add(dt['Effectif_G_AN1']))
#df['lat'] = pd.to_numeric(df.lat,errors='coerce')
#df['long'] = pd.to_numeric(df.long,errors='coerce')
ecole = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.long,df.lat))
ecole.crs = {'init': 'epsg:4326'}
ecole['Tx_redoublement'] = (ecole['red_G_AN2'].add(ecole['red_F_AN2']))/(ecole['Effectif_F_AN1'].add(ecole['Effectif_G_AN1']))
savanes_carte = carte.loc[carte.REGION =='SAVANES']
savanes_ecole = ecole.loc[ecole.REGION =='SAVANES']
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
savanes_ecole.plot(markersize = savanes_ecole.Tx_redoublement, ax=ax)
plt.show()
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
savanes_ecole.plot(s = savanes_ecole.Tx_redoublement, ax=ax)
savanes_ecole.head()
savanes_ecole.columns
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
savanes_ecole.scatter(savanes_ecole.long,savanes_ecole.lat,s = savanes_ecole.Tx_redoublement, ax=ax)
plt.show()
savanes=df.loc[df.REGION =='SAVANES']
savanes=df.loc[df.REGION =='SAVANES']
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
savanes_ecole.scatter(savanes.long,savanes.lat,s = savanes_ecole.Tx_redoublement, ax=ax)
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
savanes.scatter(savanes.long,savanes.lat, ax=ax)
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ax.scatter(savanes.long,savanes.lat)
plt.show()
savanes = df.loc[df.REGION =='SAVANES']
savanes['Tx_redoublement'] = (savanes['red_G_AN2']+(savanes['red_F_AN2']))/(savanes['Effectif_F_AN1']+(savanes['Effectif_G_AN1']))
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ax.scatter(savanes.long,savanes.lat,s=savanes.Tx_redoublement)
savanes = df.loc[df.REGION =='SAVANES']
savanes['Tx_redoublement'] = (savanes['red_G_AN2']+(savanes['red_F_AN2']))/(savanes['Effectif_F_AN1']+(savanes['Effectif_G_AN1']))
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ax.scatter(savanes.long,savanes.lat,s=savanes.Tx_redoublement)
savanes = df.loc[df.REGION =='SAVANES']
savanes['Tx_redoublement'] = (savanes['red_G_AN2']+(savanes['red_F_AN2']))/(savanes['Effectif_F_AN1']+(savanes['Effectif_G_AN1']))
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ax.scatter(savanes.long,savanes.lat,s=savanes.Tx_redoublement)
plt.show()
savanes = df.loc[df.REGION =='SAVANES']
savanes['Tx_redoublement'] =100*(savanes['red_G_AN2']+(savanes['red_F_AN2']))/(savanes['Effectif_F_AN1']+(savanes['Effectif_G_AN1']))
ax = savanes_carte.plot(figsize = (8,8), color='whitesmoke', linestyle=':',edgecolor = 'black')
ax.scatter(savanes.long,savanes.lat,s=savanes.Tx_redoublement)
plt.show()
devtools::install_github("xiaodaigh/disk.frame")
install.packages("Rcpp")
install.packages("Rcpp")
install.packages("Rcpp")
install.packages("disk.frame")
library(data.table)
#library(dtplyr)
library(dplyr)
#library(vroom)
fichier <- "C:/Users/Samati/Desktop/r/SPSS_RGPH4/population.csv"
#df <- vroom(fichier)
#col=spec(df)
#df <- vroom(fichier,col_types = col)
library(disk.frame)
disk_df <- csv_to_disk.frame(
fichier,
outdir = "population",
overwrite = T)
disk_df
collect(disk_df) %>% head()
disk_df %>% group_by(as.factor(P04)) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE)) %>%
collect()
setattr(disk_df$sexe,"levels",c("Masculin","Feminin"))
disk_df[,by=sexe,.(.N,mean(P06AGE, na.rm = T))]
disk_df[,sexe:= as.factor(P04)]
setattr(disk_df$sexe,"levels",c("Masculin","Feminin"))
disk_df[,by=sexe,.(.N,mean(P06AGE, na.rm = T))]
disk_df[,by=P04,.(.N,mean(P06AGE, na.rm = T))]
disk_df %>% group_by(P04) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE)) %>%
collect()
library(data.table)
#library(dtplyr)
library(dplyr)
#library(vroom)
fichier <- "C:/Users/Samati/Desktop/r/SPSS_RGPH4/population.csv"
#df <- vroom(fichier)
#col=spec(df)
#df <- vroom(fichier,col_types = col)
library(disk.frame)
options(future.globals.maxSize = Inf)
disk_df <- csv_to_disk.frame(
fichier,
outdir = "population",
overwrite = T)
disk_df %>% group_by(P04) %>%
summarise(Effectif = n(),
age_moy = mean(P06AGE,na.rm = TRUE)) %>%
collect()
collect(disk_df)[,by=sexe,.(.N,mean(P06AGE, na.rm = T))]
collect(disk_df)[,by=P04,.(.N,mean(P06AGE, na.rm = T))]
